/*
 URI.js v2.0.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js
*/
var A,URI=function(){function e(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];if(1<a.length){a[0]=a[0].slice(0,-1);for(var b=a.length-1,g=1;g<b;++g)a[g]=a[g].slice(1,-1);a[b]=a[b].slice(1);return a.join("")}return a[0]}function k(a){var b=e("[0-9]","[A-Fa-f]"),g=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",a?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]");return{v:!1,m:new RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),o:new RegExp(e("[^\\%\\:]",
g,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),h:new RegExp(e("[^\\%]",g,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),i:new RegExp(e("[^\\%\\/\\:\\@]",g,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),j:new RegExp(e("[^\\%\\/\\@]",g,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),"g"),l:new RegExp(e("[^\\%]",g,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]",a?"[\\uE000-\\uF8FF]":"[]"),"g"),g:new RegExp(e("[^\\%]",g,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]","[\\:\\@\\/\\?]"),"g"),c:new RegExp(e("[^]",g,"[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]"),
"g"),s:new RegExp(g,"g"),u:new RegExp(e("[^\\%]",g,e("[\\:\\/\\?\\#\\[\\]\\@]","[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]")),"g"),a:new RegExp("(?:"+("(?:"+("%[EFef]"+b+"%"+b+b+"%"+b+b)+")|"+("(?:"+("%[89A-Fa-f]"+b+"%"+b+b)+")")+"|"+("(?:"+("%"+b+b)+")"))+")","g")}}function n(a){a=a.charCodeAt(0);var b;16>a?b="%0"+a.toString(16).toUpperCase():128>a?b="%"+a.toString(16).toUpperCase():b=2048>a?"%"+(a>>6|192).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase():"%"+(a>>12|224).toString(16).toUpperCase()+
"%"+(a>>6&63|128).toString(16).toUpperCase()+"%"+(a&63|128).toString(16).toUpperCase();return b}function w(a){for(var b="",g=0,c=a.length,d,f,r;g<c;)d=parseInt(a.substr(g+1,2),16),128>d?(b+=String.fromCharCode(d),g+=3):194<=d&&224>d?(6<=c-g?(f=parseInt(a.substr(g+4,2),16),b+=String.fromCharCode((d&31)<<6|f&63)):b+=a.substr(g,6),g+=6):224<=d?(9<=c-g?(f=parseInt(a.substr(g+4,2),16),r=parseInt(a.substr(g+7,2),16),b+=String.fromCharCode((d&15)<<12|(f&63)<<6|r&63)):b+=a.substr(g,9),g+=9):(b+=a.substr(g,
3),g+=3);return b}function B(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function x(a){return a.toUpperCase()}function h(a,b){function g(a){var g=w(a);return g.match(b.s)?g:a}a.scheme&&(a.scheme=String(a.scheme).replace(b.a,g).toLowerCase().replace(b.m,""));void 0!==a.userinfo&&(a.userinfo=String(a.userinfo).replace(b.a,g).replace(b.o,n).replace(b.a,x));void 0!==a.host&&(a.host=String(a.host).replace(b.a,g).toLowerCase().replace(b.h,
n).replace(b.a,x));void 0!==a.path&&(a.path=String(a.path).replace(b.a,g).replace(a.scheme?b.i:b.j,n).replace(b.a,x));void 0!==a.query&&(a.query=String(a.query).replace(b.a,g).replace(b.l,n).replace(b.a,x));void 0!==a.fragment&&(a.fragment=String(a.fragment).replace(b.a,g).replace(b.g,n).replace(b.a,x))}function m(a,b){void 0===b&&(b={});var g=!1!==b.iri?z:u,c,d={};"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a);if(c=a.match(f)){r?(d.scheme=c[1],d.userinfo=c[3],d.host=c[4],d.port=parseInt(c[5],
10),d.path=c[6]||"",d.query=c[7],d.fragment=c[8],isNaN(d.port)&&(d.port=c[5])):(d.scheme=c[1]||void 0,d.userinfo=-1!==a.indexOf("@")?c[3]:void 0,d.host=-1!==a.indexOf("//")?c[4]:void 0,d.port=parseInt(c[5],10),d.path=c[6]||"",d.query=-1!==a.indexOf("?")?c[7]:void 0,d.fragment=-1!==a.indexOf("#")?c[8]:void 0,isNaN(d.port)&&(d.port=a.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?c[4]:void 0));d.reference=void 0!==d.scheme||void 0!==d.userinfo||void 0!==d.host||void 0!==d.port||d.path||void 0!==d.query?void 0===
d.scheme?"relative":void 0===d.fragment?"absolute":"uri":"same-document";b.reference&&"suffix"!==b.reference&&b.reference!==d.reference&&(d.error=d.error||"URI is not a "+b.reference+" reference.");c=t[(b.scheme||d.scheme||"").toLowerCase()];if("undefined"===typeof A||b.unicodeSupport||c&&c.unicodeSupport)h(d,g);else{if(d.host&&(b.domainHost||c&&c.domainHost))try{d.host=A.b(d.host.replace(g.a,w).toLowerCase())}catch(p){d.error=d.error||"Host's domain name can not be converted to ASCII via punycode: "+
p}h(d,u)}c&&c.parse&&c.parse(d,b)}else d.error=d.error||"URI can not be parsed.";return d}function C(a){var b=[];void 0!==a.userinfo&&(b.push(a.userinfo),b.push("@"));void 0!==a.host&&b.push(a.host);"number"===typeof a.port&&(b.push(":"),b.push(a.port.toString(10)));return b.length?b.join(""):void 0}function l(a){for(var b=[],g;a.length;)a.match(D)?a=a.replace(D,""):a.match(E)?a=a.replace(E,"/"):a.match(c)?(a=a.replace(c,"/"),b.pop()):"."===a||".."===a?a="":(g=a.match(p)[0],a=a.slice(g.length),b.push(g));
return b.join("")}function v(a,b){void 0===b&&(b={});var g=b.iri?z:u,c=[],d,f;(d=t[(b.scheme||a.scheme||"").toLowerCase()])&&d.serialize&&d.serialize(a,b);if("undefined"!==typeof A&&a.host&&(b.domainHost||d&&d.domainHost))try{a.host=b.iri?A.f(a.host):A.b(a.host.replace(g.a,w).toLowerCase())}catch(r){a.error=a.error||"Host's domain name can not be converted to "+(b.iri?"Unicode":"ASCII")+" via punycode: "+r}h(a,g);"suffix"!==b.reference&&a.scheme&&(c.push(a.scheme),c.push(":"));g=C(a);void 0!==g&&
("suffix"!==b.reference&&c.push("//"),c.push(g),a.path&&"/"!==a.path.charAt(0)&&c.push("/"));void 0!==a.path&&(f=a.path,b.absolutePath||d&&d.absolutePath||(f=l(f)),void 0===g&&(f=f.replace(/^\/\//,"/%2F")),c.push(f));void 0!==a.query&&(c.push("?"),c.push(a.query));void 0!==a.fragment&&(c.push("#"),c.push(a.fragment));return c.join("")}function y(a,b,c,f){void 0===c&&(c={});var d={};f||(a=m(v(a,c),c),b=m(v(b,c),c));c=c||{};!c.tolerant&&b.scheme?(d.scheme=b.scheme,d.userinfo=b.userinfo,d.host=b.host,
d.port=b.port,d.path=l(b.path),d.query=b.query):(void 0!==b.userinfo||void 0!==b.host||void 0!==b.port?(d.userinfo=b.userinfo,d.host=b.host,d.port=b.port,d.path=l(b.path),d.query=b.query):(b.path?("/"===b.path.charAt(0)?d.path=l(b.path):(void 0===a.userinfo&&void 0===a.host&&void 0===a.port||a.path?a.path?d.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:d.path=b.path:d.path="/"+b.path,d.path=l(d.path)),d.query=b.query):(d.path=a.path,d.query=void 0!==b.query?b.query:a.query),d.userinfo=a.userinfo,
d.host=a.host,d.port=a.port),d.scheme=a.scheme);d.fragment=b.fragment;return d}var u=k(!1),z=k(!0),f=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n)*))?/i,D=/^\.\.?\//,E=/^\/\.(\/|$)/,c=/^\/\.\.(\/|$)/,p=/^\/?(?:.|\n)*?(?=\/|$)/,r=void 0==="".match(/(){0}/)[1],t={};return{IRI_SUPPORT:!0,VALIDATE_SUPPORT:!1,pctEncChar:n,pctDecChars:w,SCHEMES:t,parse:m,_recomposeAuthority:C,removeDotSegments:l,serialize:v,resolveComponents:y,resolve:function(a,
b,c){return v(y(m(a,c),m(b,c),c,!0),c)},normalize:function(a,b){"string"===typeof a?a=v(m(a,b),b):"object"===B(a)&&(a=m(v(a,b),b));return a},equal:function(a,b,c){"string"===typeof a?a=v(m(a,c),c):"object"===B(a)&&(a=v(a,c));"string"===typeof b?b=v(m(b,c),c):"object"===B(b)&&(b=v(b,c));return a===b},escapeComponent:function(a,b){return a&&a.toString().replace(b&&b.iri?z.c:u.c,n)},unescapeComponent:function(a,b){return a&&a.toString().replace(b&&b.iri?z.a:u.a,w)}}}();A=function(){function e(f){throw new RangeError(y[f]);}function k(f,D){for(var h=f.length,c=[];h--;)c[h]=D(f[h]);return c}function n(f,h){var e=f.split("@"),c="";1<e.length&&(c=e[0]+"@",f=e[1]);f=f.replace(v,".");e=k(f.split("."),h).join(".");return c+e}function w(f){for(var h=[],e=0,c=f.length,p,r;e<c;)p=f.charCodeAt(e++),55296<=p&&56319>=p&&e<c?(r=f.charCodeAt(e++),56320==(r&64512)?h.push(((p&1023)<<10)+(r&1023)+65536):(h.push(p),e--)):h.push(p);return h}function B(f){return k(f,function(f){var e=
"";65535<f&&(f-=65536,e+=z(f>>>10&1023|55296),f=56320|f&1023);return e+=z(f)}).join("")}function x(f,e,h){var c=0;f=h?u(f/700):f>>1;for(f+=u(f/e);455<f;c+=36)f=u(f/35);return u(c+36*f/(f+38))}function h(f){var h=[],k=f.length,c,p=0,r=128,t=72,a,b,g,q,d;a=f.lastIndexOf("-");0>a&&(a=0);for(b=0;b<a;++b)128<=f.charCodeAt(b)&&e("not-basic"),h.push(f.charCodeAt(b));for(a=0<a?a+1:0;a<k;){b=p;c=1;for(g=36;;g+=36){a>=k&&e("invalid-input");q=f.charCodeAt(a++);q=10>q-48?q-22:26>q-65?q-65:26>q-97?q-97:36;(36<=
q||q>u((2147483647-p)/c))&&e("overflow");p+=q*c;d=g<=t?1:g>=t+26?26:g-t;if(q<d)break;q=36-d;c>u(2147483647/q)&&e("overflow");c*=q}c=h.length+1;t=x(p-b,c,0==b);u(p/c)>2147483647-r&&e("overflow");r+=u(p/c);p%=c;h.splice(p++,0,r)}return B(h)}function m(f){var h,k,c,p,r,t,a,b,g,q=[],d,m,l;f=w(f);d=f.length;h=128;k=0;r=72;for(t=0;t<d;++t)g=f[t],128>g&&q.push(z(g));for((c=p=q.length)&&q.push("-");c<d;){a=2147483647;for(t=0;t<d;++t)g=f[t],g>=h&&g<a&&(a=g);m=c+1;a-h>u((2147483647-k)/m)&&e("overflow");k+=
(a-h)*m;h=a;for(t=0;t<d;++t)if(g=f[t],g<h&&2147483647<++k&&e("overflow"),g==h){b=k;for(a=36;;a+=36){g=a<=r?1:a>=r+26?26:a-r;if(b<g)break;l=b-g;b=36-g;g=g+l%b;q.push(z(g+22+75*(26>g)-0));b=u(l/b)}q.push(z(b+22+75*(26>b)-0));r=x(k,m,c==p);k=0;++c}++k;++h}return q.join("")}var C=/^xn--/,l=/[^\x20-\x7E]/,v=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},u=Math.floor,
z=String.fromCharCode;return{version:"1.3.2",w:{decode:w,encode:B},decode:h,encode:m,b:function(f){return n(f,function(f){return l.test(f)?"xn--"+m(f):f})},f:function(f){return n(f,function(f){return C.test(f)?h(f.slice(4).toLowerCase()):f})}}}();URI.SCHEMES.http=URI.SCHEMES.https={domainHost:!0,parse:function(e){e.host||(e.error=e.error||"HTTP URIs must have a host.");return e},serialize:function(e){if(e.port===("https"!==String(e.scheme).toLowerCase()?80:443)||""===e.port)e.port=void 0;e.path||(e.path="/");return e}};
