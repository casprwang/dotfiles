{"version":3,"file":"base.js","sourceRoot":"","sources":["base.ts"],"names":[],"mappings":"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","sourcesContent":["\"use strict\";\n\nimport * as ts from \"typescript\";\n\nimport * as path from \"path\";\nimport * as fs from \"fs\";\n\nimport {Options} from \"../\";\nimport {getConfigFileName} from \"../utils\";\n\ninterface TsfmtSettings {\n    // from FormatCodeOptions\n    // コンマ区切り記号の後にスペースを追加する\n    insertSpaceAfterCommaDelimiter?: boolean;\n    // 'for' ステートメントでセミコロンの後にスペースを挿入する\n    insertSpaceAfterSemicolonInForStatements?: boolean;\n    // 二項演算子の前後にスペースを挿入する\n    insertSpaceBeforeAndAfterBinaryOperators?: boolean;\n    // 制御フローステートメント内のキーワードの後にスペースを追加する\n    insertSpaceAfterKeywordsInControlFlowStatements?: boolean;\n    // 匿名関数に対する関数キーワードの後にスペースを追加する\n    insertSpaceAfterFunctionKeywordForAnonymousFunctions?: boolean;\n    // かっこ内が空でない場合に始め括弧の後ろと終わりカッコの前にスペースを挿入する\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets?: boolean;\n    // template string literalsの括弧内にスペースを挿入する\n    insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces?: boolean;\n    // 新しい行に関数の始め中括弧を配置する\n    placeOpenBraceOnNewLineForFunctions?: boolean;\n    // 新しい行にコントロールブロックの始め中括弧を配置する\n    placeOpenBraceOnNewLineForControlBlocks?: boolean;\n    // from EditorOptions\n    indentSize?: number;\n    // 0, 1, 2 or None, Block, Smart\n    indentStyle?: number | string;\n    tabSize?: number;\n    newLineCharacter?: string;\n    convertTabsToSpaces?: boolean;\n}\n\nexport default function makeFormatCodeOptions(fileName: string, opts: Options, formatOptions: ts.FormatCodeOptions): ts.FormatCodeOptions {\n    \"use strict\";\n\n    let baseDir = opts.baseDir ? path.resolve(opts.baseDir) : path.dirname(path.resolve(fileName));\n    let configFileName = getConfigFileName(baseDir, \"tsfmt.json\");\n    if (!configFileName) {\n        return formatOptions;\n    }\n\n    if (opts.verbose) {\n        console.log(`read ${configFileName} for ${fileName}`);\n    }\n\n    var config: TsfmtSettings = JSON.parse(<any>fs.readFileSync(configFileName, \"utf-8\"));\n    if (typeof config.insertSpaceAfterCommaDelimiter === \"boolean\") {\n        formatOptions.InsertSpaceAfterCommaDelimiter = config.insertSpaceAfterCommaDelimiter;\n    }\n    if (typeof config.insertSpaceAfterSemicolonInForStatements === \"boolean\") {\n        formatOptions.InsertSpaceAfterSemicolonInForStatements = config.insertSpaceAfterSemicolonInForStatements;\n    }\n    if (typeof config.insertSpaceBeforeAndAfterBinaryOperators === \"boolean\") {\n        formatOptions.InsertSpaceBeforeAndAfterBinaryOperators = config.insertSpaceBeforeAndAfterBinaryOperators;\n    }\n    if (typeof config.insertSpaceAfterKeywordsInControlFlowStatements === \"boolean\") {\n        formatOptions.InsertSpaceAfterKeywordsInControlFlowStatements = config.insertSpaceAfterKeywordsInControlFlowStatements;\n    }\n    if (typeof config.insertSpaceAfterFunctionKeywordForAnonymousFunctions === \"boolean\") {\n        formatOptions.InsertSpaceAfterFunctionKeywordForAnonymousFunctions = config.insertSpaceAfterFunctionKeywordForAnonymousFunctions;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis === \"boolean\") {\n        formatOptions.InsertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets === \"boolean\") {\n        formatOptions.InsertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces === \"boolean\") {\n        formatOptions.InsertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces = config.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces;\n    }\n    if (typeof config.placeOpenBraceOnNewLineForFunctions === \"boolean\") {\n        formatOptions.PlaceOpenBraceOnNewLineForFunctions = config.placeOpenBraceOnNewLineForFunctions;\n    }\n    if (typeof config.placeOpenBraceOnNewLineForControlBlocks === \"boolean\") {\n        formatOptions.PlaceOpenBraceOnNewLineForControlBlocks = config.placeOpenBraceOnNewLineForControlBlocks;\n    }\n    if (typeof config.indentSize === \"number\") {\n        formatOptions.IndentSize = config.indentSize;\n    }\n    if (typeof config.indentStyle === \"number\") {\n        formatOptions.IndentStyle = config.indentStyle as number;\n    } else if (typeof config.indentStyle === \"string\") {\n        formatOptions.IndentStyle = (ts.IndentStyle as any)[config.indentStyle] as number;\n    }\n    if (typeof config.tabSize === \"number\") {\n        formatOptions.TabSize = config.tabSize;\n    }\n    if (typeof config.newLineCharacter === \"string\") {\n        formatOptions.NewLineCharacter = config.newLineCharacter;\n    }\n    if (typeof config.convertTabsToSpaces === \"boolean\") {\n        formatOptions.ConvertTabsToSpaces = config.convertTabsToSpaces;\n    }\n\n    return formatOptions;\n}\n"]}